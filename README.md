# ИДЗ № 1 Учет финансов ВШЭ

Выполнено: Лазаревой Александрой БПИ234.
# Finance Accounting Module

## 1. Общая идея решения

Проект представляет модуль «Учет финансов» для будущего банковского приложения. Основная цель модуля – предоставить пользователю возможность:
- Создавать, редактировать и удалять банковские счета, категории и операции (доходы/расходы).
- Выполнять аналитику, например, подсчитывать разницу между доходами и расходами, группировать операции по категориям.
- Импортировать и экспортировать данные в форматы CSV, JSON и YAML.
- Пересчитывать баланс при обнаружении несоответствий.

Кроме того, модуль включает измерение времени выполнения сценариев (через паттерн Команда с декоратором) и использование кэширования (паттерн Прокси) для оптимизации работы.

## 2. Принципы SOLID и GRASP

### SOLID
- **SRP (Single Responsibility Principle):**  
  Каждый класс имеет одну ответственность:
  - Доменные модели (BankAccount, Category, Operation) отвечают за хранение данных и базовую бизнес-логику.
  - Фабрика (DomainFactory) отвечает за создание объектов.
  - Фасады (BankAccountFacade, CategoryFacade, OperationFacade) инкапсулируют операции над объектами.
  - Команды (например, CreateBankAccountCommand) инкапсулируют отдельные сценарии.

- **OCP (Open/Closed Principle):**  
  Классы разработаны для расширения без изменения их исходного кода (например, расширение DomainFactory новыми типами объектов).

- **LSP (Liskov Substitution Principle):**  
  Все реализации интерфейсов (ICommand, IExportVisitor и т.д.) могут использоваться взаимозаменяемо без нарушения работы системы.

- **ISP (Interface Segregation Principle):**  
  Интерфейсы разделены по функциональным областям (например, IBankAccountFacade, ICategoryFacade, IOperationFacade), чтобы клиенты использовали только необходимые методы.

- **DIP (Dependency Inversion Principle):**  
  Модули зависят от абстракций, а не от конкретных реализаций. Внедрение зависимостей осуществляется через DI-контейнер (Microsoft.Extensions.DependencyInjection).

### GRASP
- **High Cohesion:**  
  Каждый класс отвечает за свою узкую область ответственности (например, DomainFactory только создает объекты, фасады управляют коллекциями объектов).

- **Low Coupling:**  
  Компоненты взаимодействуют через интерфейсы, что позволяет легко изменять или заменять части системы без затрагивания других модулей.

## 3. Реализованные паттерны GoF

### Порождающие паттерны
- **Фабрика (Factory):**  
  *Класс:* `DomainFactory`  
  *Роль:* Централизованное создание доменных объектов (BankAccount, Category, Operation) с валидацией, что исключает дублирование кода создания объектов.

### Структурные паттерны
- **Фасад (Facade):**  
  *Классы:* `BankAccountFacade`, `CategoryFacade`, `OperationFacade`  
  *Роль:* Упрощают взаимодействие с модулем, объединяя операции над связанными объектами в единый интерфейс.
- **Прокси (Proxy):**  
  *Класс:* `FinanceProxyManager`  
  *Роль:* Реализует кэширование данных для повышения производительности за счет уменьшения количества обращений к базе данных.

### Поведенческие паттерны
- **Команда (Command):**  
  *Классы:* `CreateBankAccountCommand`, `CreateCategoryCommand`, `CreateOperationCommand`, `DeleteBankAccountCommand`, `DeleteCategoryCommand`, `DeleteOperationCommand`, `UpdateBankAccountNameCommand`, `UpdateCategoryCommand`  
  *Роль:* Инкапсулируют отдельные пользовательские сценарии, что позволяет легко расширять функциональность.
- **Декоратор (Decorator):**  
  *Класс:* `TimingCommandDecorator`  
  *Роль:* Оборачивает команды для измерения времени их выполнения, что позволяет централизованно внедрять функциональность логирования производительности.
- **Шаблонный метод (Template Method):**  
  *Классы:* Абстрактный `DataImporter<T>` и его реализации (`CsvDataImporter`, `JsonDataImporter`, `YamlDataImporter`)  
  *Роль:* Определяют общий алгоритм импорта данных с возможностью изменения только части алгоритма (парсинг формата).
- **Посетитель (Visitor):**  
  *Классы:* `CsvExportVisitor`, `JsonExportVisitor`, `YamlExportVisitor`  
  *Роль:* Позволяют обойти доменные объекты и сформировать данные для экспорта в различные форматы.

## 4. Структура проекта

- **FinanceLib:**  
  - **DomainModels:** Содержит классы `BankAccount`, `Category`, `Operation` и связанные с ними перечисления.
  - **Factories:** `DomainFactory` для создания доменных объектов.
  - **Facades:** `BankAccountFacade`, `CategoryFacade`, `OperationFacade` для управления объектами.
  - **Commands:** Реализация паттерна Команда для выполнения сценариев.
  - **Importers/Exporters:** Модули импорта и экспорта данных (CSV, JSON, YAML) с использованием шаблонного метода и посетителя.
  - **Services:** `FinanceManager` – объединяет работу с доменными объектами, аналитику, импорт и экспорт.
  - **Proxies:** `FinanceProxyManager` – реализация кэширования.

- **FinanceConsoleApp:**  
  Консольное приложение, демонстрирующее работу модуля с использованием DI-контейнера и паттернов.

- **Tests:**  
  Набор xUnit тестов для проверки корректности работы фабрики, фасадов и основных операций.

## 5. Запуск проекта

### Запуск консольного приложения
1. Соберите решение:
откройте zip файл и запустите sln проект 
